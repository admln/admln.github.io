{"title":"github repo:TrackAttacker","date":"2023-01-04T14:12:44.000Z","date_formatted":{"ll":"Jan 4, 2023","L":"01/04/2023","MM-DD":"01-04"},"link":"2023/01/04/github-repo-TrackAttacker","tags":["Github","SecTool"],"updated":"2023-01-04T06:46:35.215Z","content":"<h1 id=\"from\">FROM<a title=\"#from\" href=\"#from\"></a></h1>\n<p><a href=\"https://github.com/Bywalks/TrackAttacker\" target=\"_blank\">https://github.com/Bywalks/TrackAttacker</a></p>\n<p>就是批量对IP进行各类所需信息的API进行调用返回有用信息，没什么技术含量。</p>\n<p>缺点是返回信息的整理不够，实战中怕是使用困难。</p>\n<h1 id=\"subject\">SUBJECT<a title=\"#subject\" href=\"#subject\"></a></h1>\n<h2 id=\"获取ip所属地理位置\">获取IP所属地理位置<a title=\"#获取ip所属地理位置\" href=\"#获取ip所属地理位置\"></a></h2>\n<p>API:<a href=\"https://www.ip138.com/iplookup.asp\" target=\"_blank\">https://www.ip138.com/iplookup.asp</a></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">url = <span class=\"string\">&quot;https://www.ip138.com/iplookup.asp?ip=&quot;</span>+<span class=\"built_in\">str</span>(ip)+<span class=\"string\">&quot;&amp;action=2&quot;</span></span><br><span class=\"line\">req = requests.get(url,timeout=<span class=\"number\">3</span>,headers=headers,verify=<span class=\"literal\">False</span>)</span><br><span class=\"line\">req.encoding = <span class=\"string\">&quot;gbk&quot;</span></span><br><span class=\"line\">address=re.findall(<span class=\"string\">&#x27;&quot;ASN归属地&quot;:&quot;(.*?)&quot;,\\s&quot;iP段&quot;:&#x27;</span>,req.text) </span><br><span class=\"line\"><span class=\"keyword\">if</span> address != <span class=\"string\">&quot;&quot;</span>:</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;[+]Address:&quot;</span>+address[<span class=\"number\">0</span>])</span><br></pre></td></tr></table></figure>\n<h2 id=\"获取网站备案信息\">获取网站备案信息<a title=\"#获取网站备案信息\" href=\"#获取网站备案信息\"></a></h2>\n<p>API:<a href=\"https://www.beian88.com/home/Search\" target=\"_blank\">https://www.beian88.com/home/Search</a></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">url = <span class=\"string\">&quot;https://www.beian88.com/home/Search&quot;</span></span><br><span class=\"line\">post_site = &#123;<span class=\"string\">&#x27;d&#x27;</span>: site&#125;</span><br><span class=\"line\">req = requests.post(url,data=post_site,timeout=<span class=\"number\">3</span>,headers=headers,verify=<span class=\"literal\">False</span>)</span><br><span class=\"line\">req.encoding = <span class=\"string\">&quot;utf-8&quot;</span></span><br><span class=\"line\">key=re.findall(<span class=\"string\">&#x27;&quot;key&quot;:&quot;(.*?)&quot;&#125;&#x27;</span>,req.text) </span><br><span class=\"line\">url1 = <span class=\"string\">&quot;https://www.beian88.com/d/&quot;</span> + key[<span class=\"number\">0</span>]</span><br><span class=\"line\">requ = requests.get(url1,timeout=<span class=\"number\">3</span>,headers=headers,verify=<span class=\"literal\">False</span>)</span><br><span class=\"line\">requ.encoding = <span class=\"string\">&quot;utf-8&quot;</span></span><br><span class=\"line\">name=re.findall(<span class=\"string\">&#x27;&lt;span class=&quot;field-value&quot; id=&quot;ba_Name&quot;&gt;(.*?)&lt;/span&gt;&#x27;</span>,requ.text)</span><br><span class=\"line\"><span class=\"keyword\">if</span> name[<span class=\"number\">0</span>] != <span class=\"string\">&quot;&quot;</span>:</span><br><span class=\"line\">    <span class=\"comment\">#print(&quot;备案信息&quot;)</span></span><br><span class=\"line\">    webname=re.findall(<span class=\"string\">&#x27;&lt;span class=&quot;field-value&quot; id=&quot;ba_WebName&quot;&gt;(.*?)&lt;/span&gt;&#x27;</span>,requ.text) </span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;[+]网站名称:&quot;</span>+webname[<span class=\"number\">0</span>]) </span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;[+]主办单位名称:&quot;</span>+name[<span class=\"number\">0</span>])</span><br><span class=\"line\">    <span class=\"built_in\">type</span>=re.findall(<span class=\"string\">&#x27;&lt;span class=&quot;field-value&quot; id=&quot;ba_Type&quot;&gt;(.*?)&lt;/span&gt;&#x27;</span>,requ.text) </span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;[+]主办单位性质:&quot;</span>+<span class=\"built_in\">type</span>[<span class=\"number\">0</span>])</span><br><span class=\"line\">    license=re.findall(<span class=\"string\">&#x27;&lt;span class=&quot;field-value&quot; id=&quot;ba_License&quot;&gt;(.*?)&lt;/span&gt;&#x27;</span>,requ.text) </span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;[+]网站备案/许可证号:&quot;</span>+license[<span class=\"number\">0</span>])</span><br></pre></td></tr></table></figure>\n<h2 id=\"获取ip绑定域名\">获取IP绑定域名<a title=\"#获取ip绑定域名\" href=\"#获取ip绑定域名\"></a></h2>\n<p>API:<a href=\"https://site.ip138.com\" target=\"_blank\">https://site.ip138.com</a></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">url = <span class=\"string\">&quot;https://site.ip138.com/&quot;</span>+<span class=\"built_in\">str</span>(ip)+<span class=\"string\">&quot;/&quot;</span></span><br><span class=\"line\">req = requests.get(url,timeout=<span class=\"number\">3</span>,headers=headers,verify=<span class=\"literal\">False</span>)</span><br><span class=\"line\">req.encoding = <span class=\"string\">&quot;utf-8&quot;</span></span><br><span class=\"line\">site=re.findall(<span class=\"string\">&#x27;&lt;li&gt;&lt;span\\sclass=&quot;date&quot;&gt;[\\d\\-\\s]+&lt;/span&gt;&lt;a\\shref=&quot;.*?&quot;\\starget=&quot;_blank&quot;&gt;(.*?)&lt;/a&gt;&lt;/li&gt;&#x27;</span>,req.text) </span><br><span class=\"line\"><span class=\"keyword\">if</span> site != <span class=\"string\">&quot;&quot;</span>:</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;[+]Site:&quot;</span>+site[<span class=\"number\">0</span>])</span><br><span class=\"line\">    <span class=\"keyword\">return</span> site[<span class=\"number\">0</span>]</span><br></pre></td></tr></table></figure>\n<h2 id=\"获取域名whois信息\">获取域名WHOIS信息<a title=\"#获取域名whois信息\" href=\"#获取域名whois信息\"></a></h2>\n<p>API:<a href=\"http://whois.4.cn/api/main\" target=\"_blank\">http://whois.4.cn/api/main</a></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">url = <span class=\"string\">&quot;http://whois.4.cn/api/main&quot;</span></span><br><span class=\"line\">post_site = &#123;<span class=\"string\">&#x27;domain&#x27;</span>: site&#125;</span><br><span class=\"line\">req = requests.post(url,data=post_site,headers=headers,verify=<span class=\"literal\">False</span>)</span><br><span class=\"line\">json_data = json.loads(req.text)</span><br><span class=\"line\"><span class=\"keyword\">if</span> json_data[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;owner_name&#x27;</span>] !=<span class=\"string\">&quot;&quot;</span>:</span><br><span class=\"line\">    <span class=\"comment\">#print(&quot;Whois信息&quot;)</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;[+]域名所有者:&quot;</span>+json_data[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;owner_name&#x27;</span>])</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;[+]域名所有者邮箱:&quot;</span>+json_data[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;owner_email&#x27;</span>])</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;[+]域名所有者注册:&quot;</span>+json_data[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;registrars&#x27;</span>])</span><br></pre></td></tr></table></figure>\n<h2 id=\"nmap扫描端口\">NMAP扫描端口<a title=\"#nmap扫描端口\" href=\"#nmap扫描端口\"></a></h2>\n<p>import：nmap</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">n = nmap.PortScanner() </span><br><span class=\"line\">ip = <span class=\"string\">&quot;\\&quot;&quot;</span>+ip+<span class=\"string\">&quot;\\&quot;&quot;</span></span><br><span class=\"line\">n.scan(hosts=ip,arguments=<span class=\"string\">&quot;-sV -p 22,80,90,443,1433,1521,3306,3389,6379,7001,7002,8000,8080,9090,9043,9080,9300,50050&quot;</span>)</span><br><span class=\"line\"><span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> n.all_hosts():</span><br><span class=\"line\">    <span class=\"keyword\">if</span> n[x].hostname() != <span class=\"string\">&quot;&quot;</span>:</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&quot;[+]HostName: &quot;</span> + n[x].hostname())</span><br><span class=\"line\">    <span class=\"keyword\">for</span> y <span class=\"keyword\">in</span> n[x].all_protocols():</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&quot;[+]Protocols: &quot;</span> + y)</span><br><span class=\"line\">        <span class=\"keyword\">for</span> z <span class=\"keyword\">in</span> n[x][y].keys():</span><br><span class=\"line\">            <span class=\"keyword\">if</span> n[x][y][z][<span class=\"string\">&quot;state&quot;</span>] == <span class=\"string\">&quot;open&quot;</span>:</span><br><span class=\"line\">                <span class=\"built_in\">print</span>(<span class=\"string\">&quot;[+]port: &quot;</span> + <span class=\"built_in\">str</span>(z) + <span class=\"string\">&quot; | name: &quot;</span> + n[x][y][z][<span class=\"string\">&quot;name&quot;</span>] + <span class=\"string\">&quot; | state: &quot;</span> + n[x][y][z][<span class=\"string\">&quot;state&quot;</span>])</span><br></pre></td></tr></table></figure>\n<h1 id=\"study\">study<a title=\"#study\" href=\"#study\"></a></h1>\n<ol>\n<li>\n<p>对于简单快速匹配来说，re.findall函数挺好用的；</p>\n</li>\n<li>\n<p>nmap可以直接代码集成调用，内嵌方便；</p>\n</li>\n</ol>\n","next":{"title":"Hello World","link":"2023/01/04/hello-world"},"plink":"https://admln.github.io/2023/01/04/github-repo-TrackAttacker/","toc":[{"id":"from","title":"FROM","index":"1"},{"id":"subject","title":"SUBJECT","index":"2","children":[{"id":"获取ip所属地理位置","title":"获取IP所属地理位置","index":"2.1"},{"id":"获取网站备案信息","title":"获取网站备案信息","index":"2.2"},{"id":"获取ip绑定域名","title":"获取IP绑定域名","index":"2.3"},{"id":"获取域名whois信息","title":"获取域名WHOIS信息","index":"2.4"},{"id":"nmap扫描端口","title":"NMAP扫描端口","index":"2.5"}]},{"id":"study","title":"study","index":"3"}],"copyright":{"published":"January 4, 2023","author":"Daemon X","link":"<a href=\"https://admln.github.io/2023/01/04/github-repo-TrackAttacker/\" title=\"github repo:TrackAttacker\">https://admln.github.io/2023/01/04/github-repo-TrackAttacker/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"external nofollow noopener\" target=\"_blank\">CC BY-NC-ND 4.0</a>)"},"reading_time":"596 words in 4 min"}